<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="stylesheet" href="../global.css" />
    <script type="module" defer src="../layout.js"></script>

    <script type="module" defer src="feeCollection.js"></script>

    <style>
        .feeCollectionTable {
            display: grid;
            align-content: flex-start;
            overflow: auto;
        }

        .feeCollectionTable>tr {
            display: flex;
            align-items: center;
            padding: var(--paddingR);
            border-bottom: 3px solid var(--bg1);
        }

        .feeCollectionTableHeadingRow {
            /* blue */
            background-color: var(--color1);
            text-transform: capitalize;
            padding: var(--paddingL) var(--paddingR) !important;
        }

        .feeCollectionTableRow:hover,
        .feeCollectionTableRow.selected {
            /* purple */
            background-color: hsl(from var(--color2) h s calc(l * 1.07));
        }

        .feeCollectionTable th,
        .feeCollectionTable td {
            flex: 1 0 100px;
            display: grid;
            align-content: flex-start;
        }

        .feeCollectionTable th.larger,
        .feeCollectionTable td.larger {
            flex-basis: 200px;
        }

        .feeCollectionTable th.smaller,
        .feeCollectionTable td.smaller {
            flex: 0 0 50px;
        }
    </style>
</head>

<body>
    <div id="sidebarTemplate"></div>

    <div class="allCont">
        <div id="navTemplate"></div>

        <main class="main" style="background-color: var(--bg1); padding: 0;">
            <div style="display: grid; align-content: flex-start;">
                <div style="display: flex; flex-wrap: wrap;  gap: var(--gapR);">
                    <div
                        style="flex: 3 1 600px; display: grid; align-content: flex-start; grid-template-rows: auto 1fr;  background-color: var(--bg2); padding: var(--paddingR);">
                        <div style="display: flex; align-items: center; justify-content: space-between;">
                            <h2>Fees Collection</h2>

                            <div>...</div>
                        </div>

                        <canvas id="feesChart" style="max-height: 250px;"></canvas>
                    </div>

                    <template id="feeCollectionTileTemplate">
                        <div class="feeCollectionTile"
                            style=" display: grid; align-content:flex-start; gap: var(--gapR); padding: var(--paddingR); background-color: var(--color1); border-radius: var(--borderRadiusR); text-transform: capitalize;">
                            <div style="display: flex; align-items: center; justify-content: space-between;">
                                <img alt="iconImg" src="../public/graph.svg" class="svgImg"
                                    style="width: 2.5rem !important; height: 2.5rem !important;" />

                                <button class="button3">
                                    <img alt="iconImg" src="../public/arrow.svg" class="svgImg"
                                        style="width: .7rem !important; height: .7rem !important;" />

                                    <p>15%</p>
                                </button>
                            </div>

                            <p class="feeCollectionTileAmt largeText">$126,450</p>

                            <p class="feeCollectionTileAmtP">total amount</p>
                        </div>
                    </template>

                    <div id="feeCollectionTileCont"
                        style="flex: 1 1 400px; display: grid;  gap: var(--gapL); align-content: flex-start; grid-template-columns: repeat(auto-fit, minmax(min(200px, 100%), 1fr))">
                    </div>
                </div>

                <div
                    style="display: grid; align-content: flex-start; background-color: var(--bg2); padding: var(--paddingR); gap: var(--gapR)">
                    <div style="display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap;">
                        <h2>Fees Collection</h2>

                        <div style="display: flex; align-items: center; flex-wrap: wrap; gap: var(--gapL);">
                            <search-bar id="feeSearchButton" placeholder="Search by Name or ID"></search-bar>

                            <custom-select id="dateSelection" options="||datePicker||" value="">
                                <svg style="display: none;" slot="my-svg" xmlns="http://www.w3.org/2000/svg"
                                    viewBox="0 0 448 512">
                                    <path
                                        d="M128 0c17.7 0 32 14.3 32 32l0 32 128 0 0-32c0-17.7 14.3-32 32-32s32 14.3 32 32l0 32 48 0c26.5 0 48 21.5 48 48l0 48L0 160l0-48C0 85.5 21.5 64 48 64l48 0 0-32c0-17.7 14.3-32 32-32zM0 192l448 0 0 272c0 26.5-21.5 48-48 48L48 512c-26.5 0-48-21.5-48-48L0 192zm64 80l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16zm128 0l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16zm144-16c-8.8 0-16 7.2-16 16l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0zM64 400l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16zm144-16c-8.8 0-16 7.2-16 16l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0zm112 16l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16z" />
                                </svg>

                                <input class="dateSelectionInput" type="date" style="display: none;" />
                            </custom-select>

                            <custom-select id="classSelection" options="11A, 10B, 12 AP Calculus, 9B, all classes"
                                value="all classes"></custom-select>

                            <custom-select id="statusSelection" options="status 1, status 2, all status"
                                value="all status"></custom-select>
                        </div>
                    </div>

                    <!-- default layout for theading in fees collection table -->
                    <template id="feeCollectionTableHeadingRowTemplate">
                        <tr class="feeCollectionTableHeadingRow">
                            <th class="smaller">
                                <input type="checkbox" style="--checkboxColorStarter: var(--color2)" />
                            </th>

                            <th class="larger">
                                <p>student name</p>
                            </th>

                            <th>
                                <p>class</p>
                            </th>

                            <th>
                                <p>tuition fee</p>
                            </th>

                            <th>
                                <p>activities fee</p>
                            </th>

                            <th>
                                <p>miscellaneous</p>
                            </th>

                            <th>
                                <p>amount</p>
                            </th>

                            <th>
                                <p>status</p>
                            </th>

                            <th>
                                <p>action</p>
                            </th>
                        </tr>
                    </template>

                    <!-- default layout for row in fees collection table -->
                    <template id="feeCollectionTableRowTemplate">
                        <tr class="feeCollectionTableRow">
                            <td class="smaller">
                                <input type="checkbox" class="feeCheckbox" />
                            </td>

                            <td class="larger">
                                <div
                                    style="display: grid; align-content: flex-start; grid-template-columns: 2.5rem 1fr; gap: var(--gapS)">
                                    <div
                                        style="border-radius: var(--borderRadiusL); overflow: clip; aspect-ratio: 1/1;">
                                        <img class="feeRecordProfile"
                                            style="object-fit: cover; height: 100%; width: 100%;" />
                                    </div>

                                    <div style="display: grid; align-content: flex-start; gap: var(--gapS);">
                                        <p class="feeRecordName"></p>

                                        <p class="feeRecordDate" style="color: var(--shade1);"></p>
                                    </div>
                                </div>
                            </td>

                            <td>
                                <p class="feeRecordClass"></p>
                            </td>

                            <td>
                                <p class="feeRecordTuitionFee"></p>
                            </td>

                            <td>
                                <p class="feeRecordActivitiesFee"></p>
                            </td>

                            <td>
                                <p class="feeRecordMiscellaneous"></p>
                            </td>

                            <td>
                                <p class="feeRecordAmount"></p>
                            </td>

                            <td>
                                <div class="feeRecordStatus tag2">
                                    <div class="bulletPoint"></div>

                                    <p class="feeRecordStatusP"></p>
                                </div>
                            </td>

                            <td>
                                <div style="display: flex; align-items: center; gap: var(--gapR);">
                                    <img src="../../public/edit.svg" class="svgImg feeRecordEditBttn" />

                                    <img src="../../public/delete.svg" class="svgImg feeRecordDeleteBttn" />
                                </div>
                            </td>
                        </tr>
                    </template>

                    <table id="feeCollectionTable" class="feeCollectionTable"></table>

                    <div
                        style="display: grid; align-content: flex-start; grid-template-columns: auto 1fr auto; align-items: center;">
                        <button class="button2">previous</button>

                        <ul style="display: flex; justify-content: center; gap: var(--gapS); color: var(--shade1);">
                            <li style="color: var(--shade2);">1</li>
                            <li>2</li>
                            <li>3</li>
                            <li>4</li>
                            <li>...</li>
                            <li>17</li>
                        </ul>

                        <button class="button2">next</button>
                    </div>
                </div>
            </div>
        </main>

        <div id="footerTemplate"></div>
    </div>

    <script type="module">
        import {
            Chart,
            LineController,
            LineElement,
            PointElement,
            LinearScale,
            Title,
            Tooltip,
            CategoryScale
        } from 'https://cdn.jsdelivr.net/npm/chart.js@4.4.1/+esm';

        // Register chart components
        Chart.register(
            LineController,
            LineElement,
            PointElement,
            LinearScale,
            Title,
            Tooltip,
            CategoryScale
        );

        // Your fee data
        const months = [
            "January", "February", "March", "April", "May", "June",
            "July", "August", "September", "October", "November", "December"
        ];
        const fees = [2000, 3500, 4200, 3000, 4800, 5200, 6100, 5700, 6200, 5800, 6300, 7000];

        const ctx = document.getElementById("feesChart");

        new Chart(ctx, {
            type: 'line',
            data: {
                labels: months,
                datasets: [{
                    label: "Monthly Fees",
                    data: fees,
                    borderColor: 'blue',
                    backgroundColor: 'lightblue',
                    tension: 0.4,
                    pointRadius: 4,
                    pointHoverRadius: 6,
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    tooltip: {
                        callbacks: {
                            label: context => `Fee: $${context.parsed.y}`
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                    },
                    x: {
                    }
                }
            }
        });
    </script>
</body>

</html>